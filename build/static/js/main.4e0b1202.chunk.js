(this["webpackJsonpultraotp-client"]=this["webpackJsonpultraotp-client"]||[]).push([[0],{39:function(e,t,a){e.exports=a(69)},44:function(e,t,a){},45:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(35),s=a.n(c),o=(a(44),a(6)),l=a(15),i=(a(45),a(3)),u=a.n(i),m=a(12),p=a(2),d=a(9),f=a.n(d),v={zIndex:10,position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0,0,0,0.7)"},b={zIndex:11,position:"fixed",top:0,left:0,width:"100vw",height:"100vh",display:"flex",flexFlow:"column",alignItems:"center",justifyContent:"center"},g={zIndex:12,width:"calc(96% - 40px)",maxWidth:"460px",padding:"10px 20px",borderRadius:"10px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},E={width:"100%",display:"flex",justifyContent:"flex-end"},h=function(e){var t=e.message;return r.a.createElement("div",{className:"Alert",style:t.length>0?{display:"block"}:{display:"none"}},r.a.createElement("div",{style:v}),r.a.createElement("div",{style:b},r.a.createElement("div",{style:g,className:"alertBox"},r.a.createElement("h2",null,"Message"),r.a.createElement("p",null,t),r.a.createElement("div",{style:E},r.a.createElement("button",{onClick:function(){return e.close()},className:"primaryBtn alertBtn"},"Ok")))))};function y(e){var t=new TextEncoder;return window.crypto.subtle.importKey("raw",t.encode(e),{name:"PBKDF2"},!1,["deriveBits","deriveKey"])}function w(e,t){return window.crypto.subtle.deriveKey({name:"PBKDF2",salt:t,iterations:1e5,hash:"SHA-256"},e,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}var x=function(e,t){var a,n,r;return u.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,u.a.awrap(y(e));case 2:return a=c.sent,c.next=5,u.a.awrap(w(a,t));case 5:return n=c.sent,c.next=8,u.a.awrap(window.crypto.subtle.exportKey("jwk",n));case 8:return r=c.sent,c.abrupt("return",r);case 10:case"end":return c.stop()}}))};var O=function(e){var t=localStorage.getItem("Jwt"),a=localStorage.getItem("cryptoKey"),c=Object(n.useState)(""),s=Object(p.a)(c,2),o=s[0],i=s[1],d=Object(n.useState)(""),v=Object(p.a)(d,2),b=v[0],g=v[1],E=Object(n.useState)(!1),y=Object(p.a)(E,2),w=y[0],O=y[1],S=Object(n.useState)(""),j=Object(p.a)(S,2),k=j[0],N=j[1];return w||t&&a?r.a.createElement(l.a,{push:!0,to:"/list"}):r.a.createElement("div",null,r.a.createElement(h,{message:k,close:function(){return N("")}}),r.a.createElement("h1",null,"Login"),r.a.createElement("form",{className:"entryForm"},r.a.createElement("div",{className:"formGroup"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",id:"username",name:"username",value:o,autoComplete:"username",spellCheck:!1,required:!0,className:"primaryInput",onChange:function(e){return i(e.target.value)}})),r.a.createElement("div",{className:"formGroup"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",name:"password",value:b,autoComplete:"current-password",spellCheck:!1,required:!0,className:"primaryInput",onChange:function(e){return g(e.target.value)}})),r.a.createElement("input",{type:"submit",className:"primaryBtn userBtn",onClick:function(e){return function(e){e.preventDefault(),f.a.post("https://ultraotp.com/api/user/login",{username:o,password:b}).then((function(e){var t;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.data.success){a.next=9;break}return a.next=3,u.a.awrap(x(b,Uint8Array.from(Object(m.a)(e.data.malt).map((function(e){return e.charCodeAt()})))));case 3:t=a.sent,localStorage.setItem("cryptoKey",JSON.stringify(t)),localStorage.setItem("JWT",e.data.JWT),O(!0),a.next=10;break;case 9:N(e.data.message);case 10:case"end":return a.stop()}}))}))}(e)},value:"Sign In"})))};var S=function(e){var t=localStorage.getItem("JWT"),a=localStorage.getItem("cryptoKey"),c=Object(n.useState)(!1),s=Object(p.a)(c,2),o=s[0],i=s[1],d=Object(n.useState)(""),v=Object(p.a)(d,2),b=v[0],g=v[1],E=Object(n.useState)(""),y=Object(p.a)(E,2),w=y[0],O=y[1],S=Object(n.useState)(""),j=Object(p.a)(S,2),k=j[0],N=j[1],C=Object(n.useState)(!1),I=Object(p.a)(C,2),T=I[0],A=I[1],B=Object(n.useState)(""),W=Object(p.a)(B,2),J=W[0],F=W[1];return T||t&&a?r.a.createElement(l.a,{push:!0,to:"/list"}):r.a.createElement("div",null,r.a.createElement(h,{message:J,close:function(){return F("")}}),r.a.createElement("h1",null,"Register"),r.a.createElement("form",{className:"entryForm"},r.a.createElement("div",{className:"formGroup"},r.a.createElement("label",{htmlFor:"username"},"Create a Username ",r.a.createElement("span",null,"(4 - 120 chars.)")),r.a.createElement("input",{type:"text",id:"username",name:"username",value:b,autoComplete:"username",spellCheck:!1,required:!0,className:"primaryInput",onChange:function(e){return g(e.target.value)}})),r.a.createElement("div",{className:"formGroup"},r.a.createElement("label",{htmlFor:"password"},"Master Password ",r.a.createElement("span",null,"(12 - 120 chars.)")),r.a.createElement("input",{type:o?"text":"password",id:"password",name:"password",value:w,autoComplete:"new-password",spellCheck:!1,required:!0,className:"primaryInput",onChange:function(e){return O(e.target.value)}}),r.a.createElement("small",null,"The master password is used to encrypt and access your tokens. It is critical that you do not forget your master password; there is no way to recover the password in the event that you forget it.")),r.a.createElement("div",{className:"formGroup"},r.a.createElement("label",{htmlFor:"passwordConf"},"Re-type Master Password ",r.a.createElement("span",null,"(12 - 120 chars.)")),r.a.createElement("input",{type:o?"text":"password",id:"passwordConf",name:"passwordConf",value:k,autoComplete:"new-password",spellCheck:!1,required:!0,className:"primaryInput",onChange:function(e){return N(e.target.value)}}),r.a.createElement("div",{className:"checkContainer"},r.a.createElement("input",{type:"checkbox",id:"passCheck",name:"passCheck",onChange:function(){return i(!o)}}),r.a.createElement("label",{htmlFor:"passCheck"},"Show Password"))),r.a.createElement("input",{type:"submit",className:"primaryBtn userBtn",onClick:function(e){return function(e){var t;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.preventDefault(),w!==b){a.next=5;break}F("Username and password must not match. Please update and try again."),a.next=17;break;case 5:if(w===k){a.next=9;break}F("Master password confirmation must match. Please update and try again."),a.next=17;break;case 9:if(!(w.length<12)){a.next=13;break}F("Master password must contain at least 12 characters."),a.next=17;break;case 13:return a.next=15,u.a.awrap(window.crypto.getRandomValues(new Uint8Array(16)));case 15:t=a.sent,f.a.post("https://ultraotp.com/api/user/register",{username:b,password:w,malt:String.fromCharCode.apply(String,Object(m.a)(new Uint8Array(t)))}).then((function(e){var a,n;return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(!e.data.success){r.next=9;break}return r.next=3,u.a.awrap(x(w,t));case 3:a=r.sent,localStorage.setItem("cryptoKey",JSON.stringify(a)),localStorage.setItem("JWT",e.data.JWT),A(!0),r.next=10;break;case 9:e.data.info?(n=e.data.info.u.message+"\n"+e.data.info.p.message,F(n)):F(e.data.message);case 10:case"end":return r.stop()}}))}));case 17:case"end":return a.stop()}}))}(e)},value:"Register"})))};var j=function(e){var t;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=window.crypto.subtle.importKey("jwk",e,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]),a.abrupt("return",t);case 2:case"end":return a.stop()}}))},k=new TextEncoder;var N=function(e,t){var a,n,r,c,s,o;return u.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,u.a.awrap(j(e));case 2:return a=l.sent,n=window.crypto.getRandomValues(new Uint8Array(12)),r=k.encode(t),l.next=7,u.a.awrap(window.crypto.subtle.encrypt({name:"AES-GCM",iv:n},a,r));case 7:return c=l.sent,s=String.fromCharCode.apply(String,Object(m.a)(new Uint8Array(c))),o=String.fromCharCode.apply(String,Object(m.a)(new Uint8Array(n))),l.abrupt("return",{text:s,iv:o});case 11:case"end":return l.stop()}}))};function C(e){var t=Object(n.useState)(!1),a=Object(p.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)(!1),l=Object(p.a)(o,2),i=l[0],u=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:"entryForm"},r.a.createElement("div",{className:"formGroup"},r.a.createElement("label",{htmlFor:"issuer"},"Issuer"),r.a.createElement("input",{type:"text",id:"issuer",name:"issuer",value:e.issuer,autoComplete:"off",required:!0,className:"primaryInput",onChange:function(t){return e.setIssuer(t.target.value)}})),r.a.createElement("div",{className:"formGroup"},r.a.createElement("label",{htmlFor:"name"},"Label"),r.a.createElement("input",{type:"text",id:"name",name:"name",value:e.name,autoComplete:"off",className:"primaryInput",onChange:function(t){return e.setName(t.target.value)}})),r.a.createElement("div",{className:"formGroup"},r.a.createElement("label",{htmlFor:"name"},"Secret"),r.a.createElement("input",{type:c?"text":"password",id:"secret",name:"secret",value:e.secret,autoComplete:"new-password",required:!0,className:"primaryInput",onChange:function(t){return e.setSecret(t.target.value)}}),r.a.createElement("div",{className:"checkContainer"},r.a.createElement("input",{type:"checkbox",id:"secCheck",name:"secCheck",onChange:function(){return s(!c)}}),r.a.createElement("label",{htmlFor:"secCheck"},"Show Secret"))),r.a.createElement("div",{style:i?{display:"flex"}:{display:"none"},className:"advContainer"},r.a.createElement("div",{className:"formGroup"},r.a.createElement("label",{htmlFor:"type"},"Type"),r.a.createElement("select",{id:"type",name:"type",className:"primarySelect",onChange:function(t){return e.setType(t.target.value)},value:e.type},r.a.createElement("option",{value:"totp"},"TOTP"),r.a.createElement("option",{value:"hotp"},"HOTP"))),r.a.createElement("div",{className:"formGroup"},r.a.createElement("label",{htmlFor:"period"},"hotp"===e.type?"Counter":"Period (in seconds)"," "),r.a.createElement("input",{type:"text",id:"period",name:"period",value:e.period,autoComplete:"off",className:"primaryInput",onChange:function(t){return e.setPeriod(t.target.value)}})),r.a.createElement("div",{className:"formGroup"},r.a.createElement("label",{htmlFor:"digits"},"Digits"),r.a.createElement("select",{id:"digits",name:"digits",className:"primarySelect",onChange:function(t){return e.setDigits(t.target.value)},value:e.digits},r.a.createElement("option",{value:"6"},"6"),r.a.createElement("option",{value:"8"},"8"))),r.a.createElement("div",{className:"formGroup"},r.a.createElement("label",{htmlFor:"algo"},"Algorithm"),r.a.createElement("select",{id:"algo",name:"algo",className:"primarySelect",onChange:function(t){return e.setAlgo(t.target.value)},value:e.algo},r.a.createElement("option",{value:"SHA1"},"SHA1"),r.a.createElement("option",{value:"SHA256"},"SHA256"),r.a.createElement("option",{value:"SHA512"},"SHA512")))),r.a.createElement("div",{className:"formGroup"},r.a.createElement("button",{onClick:function(e){return function(e){e.preventDefault(),u(!i)}(e)},className:"advBtn"},i?"Hide":"More Options")),r.a.createElement("input",{type:"submit",className:"primaryBtn userBtn",onClick:function(t){return e.submit(t)},value:"Submit"})))}var I=function(){var e=Object(n.useState)("totp"),t=Object(p.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),o=Object(p.a)(s,2),i=o[0],m=o[1],d=Object(n.useState)(""),v=Object(p.a)(d,2),b=v[0],g=v[1],E=Object(n.useState)("SHA1"),y=Object(p.a)(E,2),w=y[0],x=y[1],O=Object(n.useState)(6),S=Object(p.a)(O,2),j=S[0],k=S[1],I=Object(n.useState)(30),T=Object(p.a)(I,2),A=T[0],B=T[1],W=Object(n.useState)(""),J=Object(p.a)(W,2),F=J[0],K=J[1],P=Object(n.useState)(null),H=Object(p.a)(P,2),D=H[0],G=H[1],M=Object(n.useState)(""),z=Object(p.a)(M,2),R=z[0],U=z[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("JWT"),t=localStorage.getItem("cryptoKey");e&&t||(localStorage.removeItem("JWT"),localStorage.removeItem("cryptoKey"),G("/"))}),[]),D?r.a.createElement(l.a,{push:!0,to:"".concat(D)}):r.a.createElement("div",null,r.a.createElement(h,{close:function(){return U("")},message:R}),r.a.createElement("div",{className:"homeHeader"},r.a.createElement("h1",null,"Add New Token"),r.a.createElement("button",{className:"primaryBtn redirectBtn alertBtn cancelBtn",onClick:function(){return G("list")}},"Cancel")),r.a.createElement("div",{className:"otpFormWrapper",style:{display:"block"}},r.a.createElement(C,{algo:w,digits:j,issuer:b,name:i,period:A,secret:F,type:a,submit:function(e){var t,n,r,c;return u.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(e.preventDefault(),F){s.next=5;break}U("No secret provided. Operation not performed."),s.next=24;break;case 5:if(b){s.next=9;break}U("No issuer provided. Operate not performed."),s.next=24;break;case 9:if(i){s.next=13;break}U("No label provided. Operation not performed."),s.next=24;break;case 13:return t=JSON.parse(localStorage.getItem("cryptoKey")),s.next=16,u.a.awrap(N(t,F));case 16:return n=s.sent,s.next=19,u.a.awrap(N(t,b));case 19:return r=s.sent,s.next=22,u.a.awrap(N(t,i));case 22:c=s.sent,f.a.post("https://ultraotp.com/api/doc/new",{issuer:{text:r.text,iv:r.iv},name:{text:c.text,iv:c.iv},secret:{text:n.text,iv:n.iv},type:a,algo:w,digits:j,period:A},{headers:{Authorization:"JWT ".concat(localStorage.getItem("JWT"))}}).then((function(e){e.data.success?G("/list"):U(e.data.message)}));case 24:case"end":return s.stop()}}))},setIssuer:g,setName:m,setSecret:K,setType:c,setPeriod:B,setDigits:k,setAlgo:x})))};var T=function(e){return r.a.createElement("div",{className:"EntryBtn"},r.a.createElement(o.b,{className:"CircleLink",to:"/new"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z",fill:"#ffffff"}),r.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),r.a.createElement("span",{className:"CircleSpan"}," CREATE")," "))};function A(e){return r.a.createElement("div",{className:"ToastOuter",style:e.vis?{opacity:"1",visibility:"visible",zIndex:1e3}:{opacity:"0",visibility:"hidden",zIndex:"-1"}},r.a.createElement("div",{className:"Toast"},r.a.createElement("span",null,e.message)))}function B(e){var t=.075*e.index;return r.a.createElement("div",{className:"EditIconWrapper"},r.a.createElement("div",{className:"EditIconInner "+(e.click?"desktopEdit fade-in":""),style:e.click&&{animationDelay:"".concat(t,"s")},onClick:function(){e.click&&e.click()}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),r.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))))}var W=a(37),J=a(81),F=a(82),K=Object(W.a)({colorPrimary:{backgroundColor:"#eeeeee"},barColorPrimary:{backgroundColor:"rgba(50, 232, 117, 0.5)"},root:{borderRadius:"10px"},bar:{borderRadius:"10px"}})(F.a),P=Object(J.a)((function(e){return{root:{marginTop:"2px",height:"2px",borderRadius:"10px"}}}));function H(e){var t=e.num,a=P();return r.a.createElement("div",{className:"lineContainer"},r.a.createElement(K,{variant:"determinate",className:a.root,value:t>=1?e.num/e.den*100:1}))}var D=new TextDecoder;var G=function(e,t,a){var n,r,c,s;return u.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,u.a.awrap(j(e));case 2:return n=o.sent,r=Uint8Array.from(Object(m.a)(t).map((function(e){return e.charCodeAt()}))),c=Uint8Array.from(Object(m.a)(a).map((function(e){return e.charCodeAt()}))),o.next=7,u.a.awrap(window.crypto.subtle.decrypt({name:"AES-GCM",iv:c},n,r));case 7:return s=o.sent,o.abrupt("return",D.decode(s));case 9:case"end":return o.stop()}}))},M=a(23),z=a.n(M);function R(e,t){return("totp"===e.type?new z.a.TOTP({algorithm:e.algo,digits:e.digits,period:e.period,secret:t}):new z.a.HOTP({algorithm:e.algo,digits:e.digits,counter:e.period,secret:t})).generate()}function U(e){var t=.075*e.index;return r.a.createElement("div",{className:"Token fade-in",onClick:function(){return e.copy(e.code)},style:{animationDelay:"".concat(t,"s")}},r.a.createElement("div",{className:"tokenInfo"},r.a.createElement("p",{className:"tIssuer"},e.issuer),r.a.createElement("p",{className:"tLabel"},e.name)),r.a.createElement("div",{className:"tokenCode"},r.a.createElement("h2",null,e.code),e.timeRemaining>=0&&r.a.createElement(H,{num:e.timeRemaining,den:e.period})))}var L=function(e){var t=e.token,a="totp"===t.type?e.seconds:null,c=Object(n.useState)(null),s=Object(p.a)(c,2),o=s[0],i=s[1],m=Object(n.useState)(null),d=Object(p.a)(m,2),f=d[0],v=d[1],b=Object(n.useState)(null),g=Object(p.a)(b,2),E=g[0],h=g[1],y=Object(n.useState)(null),w=Object(p.a)(y,2),x=w[0],O=w[1],S=Object(n.useState)(null),j=Object(p.a)(S,2),k=j[0],N=j[1],C=Object(n.useState)(null),I=Object(p.a)(C,2),T=I[0],A=I[1];return Object(n.useEffect)((function(){var e,a,n=JSON.parse(localStorage.getItem("cryptoKey"));"totp"===t.type&&A((e=Date.now(),(a=t.period)-Math.floor(e/1e3)%a)),function(){var e,a,r;u.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,u.a.awrap(G(n,t.secret.text,t.secret.iv));case 2:return e=c.sent,c.next=5,u.a.awrap(G(n,t.issuer.text,t.issuer.iv));case 5:return a=c.sent,c.next=8,u.a.awrap(G(n,t.name.text,t.name.iv));case 8:r=c.sent,h(R(t,e)),O(e),N(a),v(r);case 13:case"end":return c.stop()}}))}()}),[t]),Object(n.useEffect)((function(){a&&A((function(e){return e-1}))}),[a]),Object(n.useEffect)((function(){if(x&&T<=1){var e=R(t,x);e!==E&&(h(e),A(t.period))}}),[T,t,x,E]),o?r.a.createElement(l.a,{push:!0,to:"/edit/".concat(o)}):x&&k&&f?r.a.createElement("div",{className:"desktopTokenWrapper"},r.a.createElement(U,{copy:function(t){navigator.clipboard.writeText(t).then((function(){return e.complete()}))},issuer:k,name:f,period:t.period,code:E,timeRemaining:T,index:e.index}),r.a.createElement(B,{click:function(){return i(t._id)},index:e.index})):r.a.createElement("div",null)};var q=function(){var e=Object(n.useState)([]),t=Object(p.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(null),o=Object(p.a)(s,2),i=o[0],u=o[1],m=Object(n.useState)(""),d=Object(p.a)(m,2),v=d[0],b=d[1],g=Object(n.useState)(!1),E=Object(p.a)(g,2),y=E[0],w=E[1],x=Object(n.useState)(0),O=Object(p.a)(x,2),S=O[0],j=O[1];return Object(n.useEffect)((function(){var e=0,t=setInterval((function(){e++,j(e)}),1e3);return function(){clearInterval(t)}}),[]),Object(n.useEffect)((function(){var e=localStorage.getItem("JWT"),t=localStorage.getItem("cryptoKey");e&&t?f.a.get("https://ultraotp.com/api/doc/tokens",{headers:{Authorization:"JWT ".concat(localStorage.getItem("JWT"))}}).then((function(e){e.data.success?(c(e.data.tokens),localStorage.setItem("lastUpdate",Date.now())):b(e.data.message)})):(localStorage.removeItem("JWT"),localStorage.removeItem("cryptoKey"),u("/"))}),[]),Object(n.useEffect)((function(){if(y)var e=setTimeout((function(){w(!1)}),2e3);return function(){clearTimeout(e)}}),[y]),i?r.a.createElement(l.a,{to:i}):r.a.createElement("div",null,r.a.createElement(h,{close:function(){return b("")},message:v}),r.a.createElement(A,{message:"Copied!",vis:y}),r.a.createElement("div",{className:"homeHeader"},r.a.createElement("h1",null,"Ultra OTP"),r.a.createElement("button",{className:"primaryBtn logoutBtn redirectBtn",onClick:function(){return localStorage.removeItem("JWT"),localStorage.removeItem("cryptoKey"),void u("/")}},"Log Out")),r.a.createElement("ul",{className:"tokenList"},a.map((function(e,t){return r.a.createElement("li",{key:e._id},r.a.createElement(L,{token:e,seconds:S,complete:function(){return w(!0)},index:t}))}))),r.a.createElement(T,null))};var V=function(){var e=localStorage.getItem("JWT"),t=localStorage.getItem("cryptoKey");return e&&t?r.a.createElement(l.a,{to:"/list"}):r.a.createElement("div",null,r.a.createElement("div",{className:"homeHeader"},r.a.createElement("div",{className:"homeTitles"},r.a.createElement("h1",null,"Ultra OTP")),r.a.createElement("nav",{className:"homeLinksWrapper"},r.a.createElement(o.b,{to:"/register",className:"primaryBtn alertBtn cancelBtn btnFlex"},"Register"),r.a.createElement(o.b,{to:"/login",className:"primaryBtn alertBtn"},"Sign In"))))};function _(){var e=Object(l.g)().id,t=Object(n.useState)(null),a=Object(p.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)(""),i=Object(p.a)(o,2),m=i[0],d=i[1],v=Object(n.useState)(!1),b=Object(p.a)(v,2),g=b[0],E=b[1],y=Object(n.useState)(""),w=Object(p.a)(y,2),x=w[0],O=w[1],S=Object(n.useState)(""),j=Object(p.a)(S,2),k=j[0],I=j[1],T=Object(n.useState)(""),A=Object(p.a)(T,2),B=A[0],W=A[1],J=Object(n.useState)(""),F=Object(p.a)(J,2),K=F[0],P=F[1],H=Object(n.useState)(""),D=Object(p.a)(H,2),M=D[0],z=D[1],R=Object(n.useState)(""),U=Object(p.a)(R,2),L=U[0],q=U[1],V=Object(n.useState)(""),_=Object(p.a)(V,2),$=_[0],Q=_[1];Object(n.useEffect)((function(){localStorage.getItem("JWT")&&localStorage.getItem("JWT")?f.a.get("https://ultraotp.com/api/doc/token/".concat(e),{headers:{Authorization:"JWT ".concat(localStorage.getItem("JWT"))}}).then((function(e){if(e.data.success){var t=e.data.token;!function(e,t,a,n){var r,c,s;u.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,u.a.awrap(G(e,t.text,t.iv));case 2:return r=o.sent,o.next=5,u.a.awrap(G(e,a.text,a.iv));case 5:return c=o.sent,o.next=8,u.a.awrap(G(e,n.text,n.iv));case 8:s=o.sent,P(r),I(c),q(s);case 12:case"end":return o.stop()}}))}(JSON.parse(localStorage.getItem("cryptoKey")),t.secret,t.issuer,t.name),O(t.digits),W(t.period),z(t.type),Q(t.algo),E(!0)}else d(e.data.message)})):s(!0)}),[e]);return c||!e?r.a.createElement(l.a,{to:"/list"}):r.a.createElement("div",null,r.a.createElement(h,{message:m,close:function(){return d("")}}),r.a.createElement("div",{className:"homeHeader"},r.a.createElement("h1",null,"Edit"),r.a.createElement("div",{className:"homeLinksWrapper linkFlexRight"},r.a.createElement("button",{className:"primaryBtn alertBtn cancelBtn btnFlex",onClick:function(){return s(!0)}},"Cancel"),r.a.createElement("button",{className:"primaryBtn logoutBtn",onClick:function(){window.confirm("Are you sure you want to delete this token?")&&f.a.post("https://ultraotp.com/api/doc/delete/".concat(e),null,{headers:{Authorization:"JWT ".concat(localStorage.getItem("JWT"))}}).then((function(e){e.data.success?s(!0):d(e.data.message)}))}},"Delete Token"))),r.a.createElement("div",{className:"otpFormWrapper",style:g?{display:"block"}:{display:"none"}},r.a.createElement(C,{algo:$,digits:x,issuer:k,name:L,period:B,secret:K,type:M,submit:function(t){var a,n,r,c;return u.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(t.preventDefault(),K){o.next=5;break}d("No secret provided. Operation not performed."),o.next=24;break;case 5:if(k){o.next=9;break}d("No issuer provided. Operate not performed."),o.next=24;break;case 9:if(L){o.next=13;break}d("No label provided. Operation not performed."),o.next=24;break;case 13:return a=JSON.parse(localStorage.getItem("cryptoKey")),o.next=16,u.a.awrap(N(a,K));case 16:return n=o.sent,o.next=19,u.a.awrap(N(a,k));case 19:return r=o.sent,o.next=22,u.a.awrap(N(a,L));case 22:c=o.sent,f.a.post("https//ultraotp.com/api/doc/update/".concat(e),{digits:x,period:B,type:M,algo:$,issuer:{text:r.text,iv:r.iv},name:{text:c.text,iv:c.iv},secret:{text:n.text,iv:n.iv}},{headers:{Authorization:"JWT ".concat(localStorage.getItem("JWT"))}}).then((function(e){e.data.success?s(!0):d(e.data.message)}));case 24:case"end":return o.stop()}}))},setIssuer:I,setName:q,setSecret:P,setType:z,setPeriod:W,setDigits:O,setAlgo:Q})))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement((function(){return r.a.createElement(o.a,null,r.a.createElement("div",{className:"Wrapper"},r.a.createElement("div",{className:"App"},r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/login"}," ",r.a.createElement(O,null)," "),r.a.createElement(l.b,{path:"/register"}," ",r.a.createElement(S,null)," "),r.a.createElement(l.b,{path:"/new"}," ",r.a.createElement(I,null)," "),r.a.createElement(l.b,{path:"/list"}," ",r.a.createElement(q,null)),r.a.createElement(l.b,{path:"/edit/:id"}," ",r.a.createElement(_,null)," "),r.a.createElement(l.b,{path:"/"},r.a.createElement(V,null))))))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[39,1,2]]]);
//# sourceMappingURL=main.4e0b1202.chunk.js.map